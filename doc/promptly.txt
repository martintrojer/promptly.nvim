*promptly.txt* *promptly*  prompt-driven editing helper for Neovim

Author: martintrojer

===============================================================================
CONTENTS                                                        *promptly-contents*

1. Introduction..................................................|promptly-intro|
2. Setup.........................................................|promptly-setup|
3. Commands...................................................|promptly-commands|
4. Configuration.................................................|promptly-config|
5. Suggestion kinds..............................................|promptly-kinds|

===============================================================================
1. Introduction                                                     *promptly-intro*

promptly.nvim asks a model for editing suggestions and can apply them to the
current buffer.

Supported suggestion kinds:
- keys
- replace_selection
- replace_buffer
- ex_command

===============================================================================
2. Setup                                                           *promptly-setup*

>lua
  require("promptly").setup({
    providers = {
      openai = {}, -- optional (built-in defaults inferred)
    },
    profiles = {
      promptly = {
        provider = "openai",
        system_message = "You are a Neovim editing assistant. Prefer safe, minimal edits.",
      },
    },
  })
<

===============================================================================
3. Commands                                                     *promptly-commands*

:Promptly                                                      *:Promptly*
  Open prompt popup and request suggestions.
  If multiple profiles are configured, switch profile with:
  - <Tab>/<S-Tab>
  - <C-n>/<C-p>

:PromptlyHealth                                            *:PromptlyHealth*
  Check profile/provider configuration and endpoint reachability.

===============================================================================
4. Configuration                                                   *promptly-config*

`profiles.<name>.system_message` is required and must be a non-empty string.
Promptly starts on the first profile (sorted by name), and you can switch
profiles from the prompt popup.
Promptly includes a built-in profile named `code_assistant`.
Set `include_default_profile = false` to hide it.
By default `code_assistant` uses provider `openai`.
Override with `profiles.code_assistant.provider`.
Use `apply.enabled = false` to disable all apply actions for a profile.
Use `apply.allowed_kinds = { ... }` to restrict apply kinds.

>lua
  require("promptly").setup({
    include_default_profile = false, -- optional
    providers = {
      openrouter = {
        kind = "openai_compatible", -- optional for built-ins
        url = "https://openrouter.ai/api/v1/chat/completions", -- optional
        model = "openai/gpt-4.1-mini", -- optional
        api_key_env = "OPENROUTER_API_KEY", -- optional (inferred)
        referer = "https://your-site.example", -- optional
        title = "promptly.nvim", -- optional
      },
    },
    profiles = {
      code_assist = {
        provider = "openrouter",
        system_message = "You are a Neovim coding assistant. Prefer safe, minimal edits.",
        apply = {
          enabled = true, -- optional
          allowed_kinds = { "replace_selection" }, -- optional
        },
        context = {
          max_context_lines = 400, -- optional
          include_current_line = true, -- optional
          include_selection = true, -- optional
        },
      },
      golf_this = {
        provider = "openrouter",
        system_message = "You are a Vim golf specialist. Return shortest robust normal-mode sequences.",
        apply = {
          enabled = false, -- optional
          allowed_kinds = { "keys" }, -- optional
        },
        context = {
          max_context_lines = 250, -- optional
          include_current_line = true, -- optional
          include_selection = true, -- optional
        },
      },
    },
  })
<

===============================================================================
5. Suggestion kinds                                                *promptly-kinds*

- keys
  Runs payload as Normal-mode keys via `nvim_feedkeys`.
  Useful for Vim-golf style edits.

- replace_selection
  Replaces selected lines with payload text.
  Requires range/Visual selection.

- replace_buffer
  Replaces the entire current buffer with payload text.

- ex_command
  Runs payload as `vim.cmd(...)`.
  Use carefully.

vim:tw=78:ts=8:noet:ft=help:norl:
